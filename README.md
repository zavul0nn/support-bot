# Support Bot

> FSM-—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ SQLite –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏. –ü—É—Å—Ç—ã–µ –∑–∞–ø–∏—Å–∏ FSM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è.
> –§–∞–π–ª SQLite —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç; –∫–∞—Ç–∞–ª–æ–≥ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
> –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ Redis –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ, –∫–æ–≥–¥–∞ `REDIS_MIGRATE_ON_START=true`, –∑–∞–¥–∞–Ω `REDIS_HOST`, –∞ SQLite –µ—â—ë –ø—É—Å—Ç–∞—è.
> –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å Redis –∏–∑ docker-compose –∏ —É–±—Ä–∞—Ç—å `REDIS_HOST`.
> –î–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ SQLite (—Ñ–∞–π–ª –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –ø—Ä–æ–µ–∫—Ç–∞). Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏.


[![License](https://img.shields.io/github/license/mrtesla07/support-bot)](LICENSE)

[![Telegram Bot](https://img.shields.io/badge/Bot-grey?logo=telegram)](https://core.telegram.org/bots)

[![Python](https://img.shields.io/badge/Python-3.12-blue.svg)](https://www.python.org/)

[![Redis](https://img.shields.io/badge/Redis-enabled?logo=redis&color=red)](https://redis.io)

[![Docker](https://img.shields.io/badge/Docker-ready-blue?logo=docker)](https://www.docker.com/)


Support Bot ‚Äî —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö, –ø—Ä–æ–¥—É–±–ª–∏—Ä—É–µ—Ç –∏—Ö –≤ —Ñ–æ—Ä—É–º–µ —Ä–∞–±–æ—á–µ–π –≥—Ä—É–ø–ø—ã –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ç–∏–∫–µ—Ç—ã, —Å—Ç–∞—Ç—É—Å—ã, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è) —á–µ—Ä–µ–∑ Redis.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ–æ—Ä—É–º–Ω–æ–π —Ç–µ–º—ã –ø–æ–¥ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è;

- –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –º–µ–¥–∏–∞–≥—Ä—É–ø–ø –º–µ–∂–¥—É –ø—Ä–∏–≤–∞—Ç–Ω—ã–º —á–∞—Ç–æ–º –∏ —Ñ–æ—Ä—É–º–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏;

- –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –æ ¬´–≤–∏—Å—è—â–∏—Ö¬ª –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö;

- —Å–ª—É–∂–µ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `/resolve`, `/resolvequiet`, `/silent`, `/ban`, `/information`, `/newsletter`;

- –∏–Ω–ª–∞–π–Ω-–ø–∞–Ω–µ–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–π —Ç–µ–º–µ (–∫–Ω–æ–ø–∫–∏ ¬´–û—Ç–≤–µ—Ç–∏—Ç—å¬ª, ¬´–û—Ç–ª–æ–∂–∏—Ç—å¬ª, ¬´–°–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å¬ª, ¬´–ò–Ω—Ñ–æ¬ª);

- –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª ¬´–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã¬ª —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (—Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã) —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É;

- –∞–Ω—Ç–∏—Å–ø–∞–º-–∑–∞—â–∏—Ç–∞: —Ñ–∏–ª—å—Ç—Ä –∏–Ω–≤–∞–π—Ç–æ–≤/—Å—Å—ã–ª–æ–∫, —Å–∞–Ω–∏—Ç–∞—Ü–∏—è –∏–º—ë–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∞–Ω –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π.

## Remnawave (–∏–Ω—Ñ–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É **–ò–Ω—Ñ–æ** –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É `/information` –±–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Remnawave –ø–æ Telegram ID –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- —Å—Ç–∞—Ç—É—Å –∏ –ª–æ–≥–∏–Ω;
- –¥–∞—Ç—ã –ø–µ—Ä–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏;
- —Ç–µ–∫—É—â–∏–π –∏ —Å—É–º–º–∞—Ä–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫;
- –∞–∫—Ç–∏–≤–Ω—É—é –Ω–æ–¥—É –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ–Ω–ª–∞–π–Ω;
- –≤–∏–¥ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ —Å–∫–≤–∞–¥–∞–º;
- –ø–æ–¥–ø–∏—Å–Ω—É—é —Å—Å—ã–ª–∫—É (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞).

–î–ª—è —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —É–∫–∞–∂–∏—Ç–µ `REMNAWAVE_API_BASE` –∏ `REMNAWAVE_API_TOKEN`.
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: `REMNAWAVE_CADDY_TOKEN`, `REMNAWAVE_SSL_IGNORE=true`.
<details>

<summary><b>–ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã (–¥–ª—è DEV_ID)</b></summary>

* `/newsletter` ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é —Ä–∞—Å—Å—ã–ª–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç aiogram_newsletter).

* `/greeting` ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–¥–æ—Å—Ç—É–ø–Ω—ã –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã `{full_name}`).

* `/closing` ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ /resolve (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `{full_name}`).

* `/faq` ‚Äî –æ—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä FAQ: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏.

</details>

<details>

<summary><b>–ö–æ–º–∞–Ω–¥—ã –≤ —Ñ–æ—Ä—É–º–µ</b></summary>

* `/ban` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å—Å—è).

* `/silent` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –±–µ—Å—à—É–º–Ω—ã–π —Ä–µ–∂–∏–º (–æ—Ç–≤–µ—Ç—ã –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é).

* `/information` ‚Äî –≤—ã–≤–µ—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ID, username, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏).

* `/resolve` ‚Äî –ø–æ–º–µ—Ç–∏—Ç—å —Ç–∏–∫–µ—Ç –∫–∞–∫ ¬´—Ä–µ—à—ë–Ω¬ª, —Å–º–µ–Ω–∏—Ç—å —ç–º–æ–¥–∑–∏ —Ç–µ–º—ã –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

* `/resolvequiet` ‚Äî –∑–∞–∫—Ä—ã—Ç—å —Ç–∏–∫–µ—Ç –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

</details>

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)
```bash
git clone https://github.com/mrtesla07/support-bot.git
cd support-bot
cp .env.example .env
nano .env          # –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Redis
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt
python -m app
```
### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
```bash
docker compose up -d --build
```
- Redis –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º AOF –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `redis/data`. –ü–æ—Å–ª–µ `docker compose down` —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Å—Ç–∞—ë—Ç—Å—è, –ø–æ–∫–∞ –≤—ã –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `docker compose down -v`.

- –ü–∞—Ä–æ–ª—å –¥–ª—è Redis –±–µ—Ä—ë—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `REDIS_PASSWORD`; –∑–∞–¥–∞–π—Ç–µ –≤ `.env` —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º.

- Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –∫–∞—Ç–∞–ª–æ–≥ `redis/data` –∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞ –Ω–µ–≥–æ –ø—Ä–∞–≤–∞. –ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ rootless Docker –∏–ª–∏ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å —Å `Permission denied`, —Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –≤—Ä—É—á–Ω—É—é –∏ –≤—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é Redis:

  ```bash
  mkdir -p redis/data
  # –£–∑–Ω–∞–π—Ç–µ UID/GID –æ–±—Ä–∞–∑–∞: docker run --rm redis:alpine id redis
  sudo chown -R 1001:1001 redis/data  # –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∫–æ–º–∞–Ω–¥—ã
  ```
## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
docker compose down
git pull
docker compose up -d --build
```
- `--build` –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç —Å–≤–µ–∂–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`.

- Redis —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º volume, –ø–æ—ç—Ç–æ–º—É –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è –±–µ–∑ `docker compose down -v`.

- –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ `app/migrations` (—Å–∞–Ω–∏—Ç–∞—Ü–∏—è –∏–º—ë–Ω, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–µ–º). –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ò–º—è                    | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
|------------------------|--------------------------------------------------     |
| `BOT_TOKEN`            | —Ç–æ–∫–µ–Ω, –≤—ã–¥–∞–Ω–Ω—ã–π [@BotFather](https://t.me/BotFather)  |
| `BOT_DEV_ID`           | Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–¥–æ—Å—Ç—É–ø –∫ /newsletter)     |
| `BOT_GROUP_ID`         | ID —á–∞—Ç-—Ñ–æ—Ä—É–º–∞, –∫—É–¥–∞ –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è –æ–±—Ä–∞—â–µ–Ω–∏—è            |
| `BOT_EMOJI_ID`         | –∫–∞—Å—Ç–æ–º–Ω–æ–µ —ç–º–æ–¥–∑–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π                  |
| `BOT_ACTIVE_EMOJI_ID`  | —ç–º–æ–¥–∑–∏ –¥–ª—è —Ç–∏–∫–µ—Ç–æ–≤ –≤ –æ–±—Å—É–∂–¥–µ–Ω–∏–∏ (–ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞) |
| `BOT_RESOLVED_EMOJI_ID`| —ç–º–æ–¥–∑–∏ –¥–ª—è —Ä–µ—à—ë–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤                           |
| `BOT_DEFAULT_LANGUAGE` | –∫–æ–¥ —è–∑—ã–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`en`, `ru`, –∏ —Ç.–ø.)           |
| `BOT_LANGUAGE_PROMPT_ENABLED` | `true/false`, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞  |
| `SECURITY_FILTER_ENABLED` | `true/false`, –≤–∫–ª—é—á–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä –Ω–∏–∫–Ω–µ–π–º–æ–≤/—Å—Å—ã–ª–æ–∫ t.me/telegram |
| `SQLITE_PATH` | SQLite database file path (default `./data/support-bot.sqlite3`) |
| `REMNAWAVE_API_BASE` | Remnawave API base URL (e.g. `https://panel.example/api`) |
| `REMNAWAVE_API_TOKEN` | Remnawave API token |
| `REMNAWAVE_CADDY_TOKEN` | Optional X-Api-Key for Caddy auth |
| `REMNAWAVE_SSL_IGNORE` | `true/false`, ignore SSL verification |
| `REDIS_HOST`           | –∞–¥—Ä–µ—Å Redis                                           |
| `REDIS_PORT`           | –ø–æ—Ä—Ç Redis                                            |
| `REDIS_DB`             | –Ω–æ–º–µ—Ä –±–∞–∑—ã Redis                                      |
| `REDIS_PASSWORD`       | –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω) |

–ï—Å–ª–∏ –≤—ã–±–æ—Ä —è–∑—ã–∫–∞ –Ω–µ –Ω—É–∂–µ–Ω, –∑–∞–¥–∞–π—Ç–µ `BOT_DEFAULT_LANGUAGE` –∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ —à–∞–≥ –≤—ã–±–æ—Ä–∞, –≤—ã—Å—Ç–∞–≤–∏–≤ `BOT_LANGUAGE_PROMPT_ENABLED=false`. –¢–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —è–∑—ã–∫–µ.

–ï—Å–ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ –≥—Ä—É–ø–ø–µ –Ω–µ –Ω—É–∂–Ω—ã, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `BOT_REMINDERS_ENABLED=false` ‚Äî –±–æ—Ç –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö.
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ t.me/telegram (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ç–µ—Å—Ç–æ–≤), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `SECURITY_FILTER_ENABLED=false`, –Ω–æ –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ —Å –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º —Ä–∏—Å–∫–æ–≤.

## –¢–µ—Å—Ç—ã
```bash
pytest
```
## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ](docs/DEVELOPMENT.md)

- [–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](docs/ROADMAP.md)

## –ê–≤—Ç–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —á–∏—Å—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/s-b.sh`. –û–Ω:

- —Å—Ç–∞–≤–∏—Ç Docker (Ubuntu –∏–ª–∏ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π `get.docker.com`);

- –∫–ª–æ–Ω–∏—Ä—É–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç `support-bot` –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/opt/support-bot`);

- –∫–æ–ø–∏—Ä—É–µ—Ç `.env.example`, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å `BOT_TOKEN`, `BOT_DEV_ID`, `BOT_GROUP_ID`, `BOT_DEFAULT_LANGUAGE`, `BOT_LANGUAGE_PROMPT_ENABLED` –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç `docker compose up -d --build`;

- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–µ–Ω—é —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ `up/down/logs/pull`, self-update –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
```bash
curl -fsSL https://raw.githubusercontent.com/mrtesla07/support-bot/main/scripts/s-b.sh \
  | bash
```
–°–∫—Ä–∏–ø—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞—Ç–∞–ª–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (Enter ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å `/opt/support-bot`) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–ø–∏—Ä—É–µ—Ç —Å–µ–±—è –≤ `/usr/local/bin/s-b`, –ø–æ—ç—Ç–æ–º—É –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–±—Ä–∞—Ç—å `s-b` –∏–∑ –ª—é–±–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é (—É—Å—Ç–∞–Ω–æ–≤–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ `.env`, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏ —Ç.–¥.).

## –ù–µ—Å–∫–æ–ª—å–∫–æ –±–æ—Ç–æ–≤

–ß—Ç–æ–±—ã –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –æ–±—Å–ª—É–∂–∏–≤–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ **—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–µ–π—Å—Ç–≤—É–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

1. **–í—ã–¥–µ–ª–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –ø–æ–¥ –ø—Ä–æ–µ–∫—Ç**

   ```bash
   /opt/support-bot-project-a
   /opt/support-bot-project-b
   ```
   –í–Ω—É—Ç—Ä–∏ –∫–∞—Ç–∞–ª–æ–≥–∞ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ (git clone –∏–ª–∏ –∫–æ–ø–∏—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è).

2. **–°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `.env`**

   ```bash
   cp .env.example .env
   ```
   –ó–∞–¥–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `BOT_TOKEN`, `BOT_DEV_ID`, `BOT_GROUP_ID`, `BOT_EMOJI_ID`, `BOT_RESOLVED_EMOJI_ID`, `BOT_REMINDERS_ENABLED`, –∞ —Ç–∞–∫–∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Redis (`REDIS_HOST`, `REDIS_PORT`, `REDIS_DB`, `REDIS_PASSWORD`). –ú–∏–Ω–∏–º—É–º ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –±–∞–∑—ã.

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `docker-compose.yml`**

   - –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —á—Ç–æ–±—ã –∏–º–µ–Ω–∞ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `support-bot-project-a`, `support-redis-project-a`);

   - –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–æ–º –¥–ª—è Redis, —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–º–µ—à–∏–≤–∞–ª–∏—Å—å:

     ```yaml
     volumes:
       - ./redis/data-project-a:/data
     ```
4. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç –æ—Ç–¥–µ–ª—å–Ω–æ**

   ```bash
   docker compose up -d --build
   ```
   –ö–æ–º–∞–Ω–¥—É –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ—Ç–∞. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è (`git pull`, `docker compose down && docker compose up -d --build`) –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (`docker compose logs`) —Ç–æ–∂–µ –ø—Ä–æ–≤–æ–¥–∏—Ç–µ –ø–æ –æ—á–µ—Ä–µ–¥–∏.

5. **–î–µ–ª–∞–π—Ç–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –±—ç–∫–∞–ø—ã**

   –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º `scripts/redis_backup.py` –ø–æ–¥–≥—Ä—É–∂–∞–π—Ç–µ `.env` –Ω—É–∂–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–∏–ª–∏ –∑–∞–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è), —á—Ç–æ–±—ã –¥–∞–º–ø —Å–æ–¥–µ—Ä–∂–∞–ª —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏. –°–∫—Ä–∏–ø—Ç —Å–Ω–∏–º–∞–µ—Ç –ø–æ–ª–Ω—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π RDB-–¥–∞–º–ø —á–µ—Ä–µ–∑ `redis-cli --rdb`, —É–º–µ–µ—Ç —Å–∂–∏–º–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (`--compress`), —Å—á–∏—Ç–∞—Ç—å SHA256 (`--checksum`) –∏ —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã (`--keep`).

   ```bash
   # –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π RDB-–±—ç–∫–∞–ø —Å gzip –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º 7 —Ñ–∞–π–ª–æ–≤
   python scripts/redis_backup.py backup --compress --keep 7
   # –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (Redis –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
   python scripts/redis_backup.py restore backups/support-bot-2025-10-20.rdb.gz --data-dir ./redis/data
   ```
–°–ª–µ–¥—É—è —ç—Ç–∏–º —à–∞–≥–∞–º, –∫–æ–¥ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞—é—Ç—Å—è –æ–±—â–∏–º–∏, –∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –º–µ–∂–¥—É –±–æ—Ç–∞–º–∏.

## –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏

–î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è Redis –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `scripts/redis_backup.py`:

- —Å–æ–∑–¥–∞—ë—Ç –±–∏–Ω–∞—Ä–Ω—ã–π RDB-–¥–∞–º–ø —á–µ—Ä–µ–∑ `redis-cli --rdb` (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å `--compress`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å `.rdb.gz`);

- —É–º–µ–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–∞–π–ª `redis-check-rdb` (`--verify`), –ø–∏—Å–∞—Ç—å SHA256 (`--checksum`) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–º–ø—ã (`--keep`);

- –∫–æ–º–∞–Ω–¥–∞ `restore` –∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ data-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (`dump.rdb`), –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Redis/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ —Å–Ω–æ–≤–∞.
```bash
# –°–Ω—è—Ç—å –ø–æ–ª–Ω—ã–π –¥–∞–º–ø —Å gzip –∏ —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 14 —Ñ–∞–π–ª–æ–≤
python scripts/redis_backup.py backup --compress --keep 14
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–∞–º–ø –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ redis/data
python scripts/redis_backup.py restore backups/support-bot-2025-10-20.rdb.gz --data-dir ./redis/data --yes --force
```
–°–∫—Ä–∏–ø—Ç —á–∏—Ç–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ `.env` (`REDIS_HOST`, `REDIS_PORT`, `REDIS_DB`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `REDIS_PASSWORD`). –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–ª–µ–≤—ã–µ hash'–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ—á–∏—â–∞—é—Ç—Å—è.

## üíñ –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–Ω–∞—Ç –Ω–∞ –æ–¥–∏–Ω –∏–∑ –∫–æ—à–µ–ª—å–∫–æ–≤ –Ω–∏–∂–µ:

| –í–∞–ª—é—Ç–∞ | –°–µ—Ç—å | –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ |
|--------|-------|----------------|
| **USDT** | **TRC20** | `TXta4rdPhWrMux5pz8dHW9YHJtZyzvuWTn` |
| **USDT** | **TON** | `UQBm7CuV93ZVRK7MiRHVFosSYOjnmonX_E-bEL8cpNe2_EA4` |

üí¨ –õ—é–±–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –∏ –≤—ã–ø—É—Å–∫–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–∞—â–µ ‚ù§Ô∏è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.12, [aiogram](https://docs.aiogram.dev) 3.x;

- Redis + APScheduler –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π;

- Docker Compose –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ [MIT](LICENSE).
